# Claude Code 使用指南

> 本指南帮助你快速上手使用 Claude Code 进行 Hugo 博客的开发和写作

## 📂 目录结构

```
.claude/
├── CLAUDE.md                    # 主配置文件（核心规则）
├── settings.json                # 权限配置
├── README.md                    # 本使用指南
└── rules/
    ├── writing-workflow.md      # 写作协作工作流程
    └── chinese-copywriting.md   # 中文文案排版规范
```

## 🚀 快速开始

### 启动 Claude Code

在项目根目录运行：

```bash
cd /Users/kobayashi/Documents/blog/DylanLim1999.github.io
claude
```

Claude Code 会自动加载 `.claude/CLAUDE.md` 中的所有配置和规则。

## 💡 常用工作流程

### 场景 1️⃣：创建新博客文章

**步骤：**

1. 直接告诉 Claude 你的想法（口述即可）：
   ```
   我想写一篇关于 Fastmail 使用体验的文章
   ```

2. Claude 会自动：
   - 切换到**写作伙伴模式**
   - 理解你的创作意图
   - 创建文章文件 `content/blog/你的标题.md`
   - 生成合适的 Front Matter（标题、标签、分类等）
   - 将你的口述内容转化为结构化文章

3. 继续补充内容：
   ```
   我还想补充一些关于隐私保护的内容
   ```

4. 多轮迭代优化：
   ```
   这段话能不能写得更简洁一些？
   帮我检查一下中文标点符号是否规范
   ```

### 场景 2️⃣：编辑已有文章

**步骤：**

1. 告诉 Claude 你要编辑的文章：
   ```
   帮我打开 content/blog/fastmail-experience.md
   ```

2. 提出修改需求：
   ```
   第二段的表达有点啰嗦，帮我优化一下
   ```

3. Claude 会：
   - 读取文章内容
   - 理解上下文
   - 保持原有风格进行优化
   - 确保符合中文排版规范

### 场景 3️⃣：Hugo 技术配置

**步骤：**

1. 直接提出技术需求：
   ```
   我想修改网站的菜单配置，增加一个"关于"页面
   ```

2. Claude 会自动：
   - 切换到**技术配置模式**
   - 定位到 `hugo.toml` 文件
   - 提供精确的配置修改方案
   - 解释修改的原理

3. 需要调试时：
   ```
   运行 hugo server，看看有没有报错
   ```

### 场景 4️⃣：Git 提交

**步骤：**

1. 完成写作或修改后：
   ```
   帮我提交这些改动到 git
   ```

2. Claude 会：
   - 查看改动的文件
   - 生成合适的 commit message
   - 执行 git add 和 git commit

## 🎯 核心特性

### ✍️ 智能模式切换

Claude 会根据你的操作自动切换模式：

| 操作 | 触发模式 | Claude 的行为 |
|------|---------|-------------|
| 编辑 `content/blog/*.md` | 📝 写作模式 | 写作伙伴，关注内容质量 |
| 修改 `hugo.toml` | ⚙️ 技术模式 | 编程助手，提供技术方案 |
| 调整 `themes/` | ⚙️ 技术模式 | 主题开发支持 |
| 运行命令 | ⚙️ 技术模式 | 命令执行和问题排查 |

### 🌟 写作增强功能

**1. 口述转文字**
- 自动过滤语气词（"嗯"、"啊"、"那个"）
- 将口语转换为书面语
- 优化语序和逻辑

**2. 自动优化**
- 生成合适的标签和分类
- 确保 Front Matter 格式正确
- 中英文混排自动加空格
- 专有名词大小写检查

**3. 风格适配**
- 技术文章 → 专业、准确
- 产品评测 → 客观、详细
- 个人随笔 → 轻松、真实
- 经验分享 → 实用、易懂

### 🛡️ 权限控制

已配置的安全权限（见 `settings.json`）：

**允许的操作：**
- ✅ Hugo 命令（hugo server, hugo build）
- ✅ Git 操作（add, commit, push）
- ✅ NPM 命令
- ✅ 编辑 content/ 下的文章
- ✅ 修改 hugo.toml 和 layouts/

**禁止的操作：**
- ❌ 读取 .env 等敏感文件
- ❌ 执行危险的删除命令

## 🔍 实用技巧

### 技巧 1：快速预览

```
运行 hugo server 并打开浏览器
```

### 技巧 2：批量优化

```
帮我检查 content/blog/ 下所有文章的中文排版是否规范
```

### 技巧 3：内容搜索

```
找一下我之前写过关于隐私保护的文章
```

### 技巧 4：图片处理

上传截图后：
```
这张图片应该放在文章的哪个位置比较合适？
帮我生成图片引用代码
```

## 📖 参考规则

所有规则都在 `.claude/` 目录下，你可以随时查看或修改：

- **CLAUDE.md**：核心协作规则，定义了 Claude 的行为模式
- **rules/writing-workflow.md**：详细的写作工作流程
- **rules/chinese-copywriting.md**：中文排版规范

## 🔄 双模式兼容

你的项目现在同时支持：

- **Claude Code**：使用 `.claude/` 配置
- **Antigravity IDE**：使用 `.agent/` 配置

两个目录的内容是同步的，你可以在不同的 IDE 中无缝切换。

## 💬 常见问题

**Q: Claude 没有按照我的规则工作怎么办？**
- 确保你在项目根目录启动 Claude Code
- 检查 `.claude/CLAUDE.md` 是否存在
- 尝试明确告诉 Claude："请按照写作模式处理"或"请按照技术模式处理"

**Q: 如何查看当前的配置？**
```
查看 .claude/CLAUDE.md 的内容
```

**Q: 如何修改规则？**
```
帮我打开 .claude/CLAUDE.md，我想调整一下写作风格
```

**Q: 能不能一次处理多个任务？**
可以！Claude 支持多步骤任务：
```
帮我：
1. 创建一篇关于 XX 的文章
2. 检查中文排版
3. 提交到 git
```

## 🎉 开始使用

现在你可以直接在 Claude Code 中开始工作了！只需自然地表达你的需求，Claude 会智能地判断你的意图并提供帮助。

**示例开场白：**

```
嘿 Claude，我想写一篇关于邮件隐私的文章，主要讲 Fastmail 相比 Gmail 的优势
```

然后就可以开始愉快的协作了！🚀
